//Blog Array

const blogs = [
  {
    id: 1,
    dateStr: `12<sup>th</sup> September '24`,
    content: `<p>So yes, today is the day I restart my 100 days of code challenge. The last time I tried to complete this challenge, it ended on day 51. This delivered a huge blow to me. It took me 3 days to get over this in order to start today. So now my challenge gets over on the 20<sup>th</sup> of December. This isn't ideal but sadly thats the way everything is. Ocassionally we all have and will have our share of bad days, it is our response and outlook towards the situation which matter. Growth surely involves minimalization of pitfalls, but whats equally important is learning how to deal with them. By no means am I trying to fend for my broken streak of 50 days, but I have come to realise that, our reaction to such hard situations is what matters most. <br> <br>
    So here I am, after 3 days of regret and brooding, writing this blog after having done some coding today. Today I implemented the option to toggle between light and dark mode on my page. This is cool and I will be trying to learn more about responsive web pages today. I am restarting this challenge with the hope of being able to rebuild my lost momentum, and regain the confidence coding once gave me. </p>`,
  },

  {
    id: 2,
    dateStr: `13<sup>th</sup> September '24`,
    content: `<p>Today was a decently productive day. I managed to learn a little more about responsive web pages and also managed to make this website slightly more responsive. I did this by changing the hardcoded pixel values of elements to rem values. This took some time but the good part was the fact that I was able to balance this with meeting guests who came home for ganpati. Not only did I manage to interact with guests, but also managed to get my work done. On any other day I would've wanted to do more, but considering today's day coupled with college, I'm happy I was able to add/modify this part of my website.</p>`,
  },

  {
    id: 3,
    dateStr: `14<sup>th</sup> September '24`,
    content: `<p>Well this was overwhelming to say the least. Today I attended my weekend Javascript class which was quite overwhelming. Why?Because today we started off with databases, mongodb to be specific. Every part of mongodb, for me atleast was a pain to say the least. Right from configuring mongodb's compass to creating a cluster to even updating it using CRUD, this was quite quite overwhelming. Databases are the next step for this website so I really want to learn them, but at the same time I need to do so slowly.<br><br> There is a clear miss match between what I have learnt through resources on the internet & what I have learnt through this weekend course. Now I need to bridge that gap because both these learning pathways are moving at a different pace. I can learn online however I want and whenever I want, but my weekend class is pretty fast. It is fast because the instructor teaches main concepts over the weekends and expects us to learn more about the subject over the week. Its been 8 weeks and its high time I bridge the gap.This is something I need to figure out, and figure out soon because my college starts in full flow from the coming week. Here's to figuring it out!! </p>`,
  },

  {
    id: 4,
    dateStr: `15<sup>th</sup> September '24`,
    content: `<p>A great day indeed. Today I had an event in college (treasure hunt) which I participated in along with my friends and boy did we have a blast. We also got assigned a senior to guide us during the event and to keep a check on us, and she was so nice to us. She was pretty disinterested in the beginning, but somehow our enthusiasum got to her and by the end she was laughing and having fun just like the three of us were. We couldn't win the thing however running up and down the college, seeing our senior laugh with us, and in general just having fun was what mattered to me. <br><br> After getting home I got some sleep and sat for my Javascript class. Today was a continuation of Mongodb and again, todays class was super interesting. I learnt about hashing, salting, input validation etc using libraries like bcrypt and zod. Again this was a pretty heavy lecture, but one which I really found myself invested in. I then proceeded to learn some terminal commands, using vim and so on. Soon after that I fixed the alignment of elements in the navbar. This was an issue because I recently changed most of the hardcoded pixel values of my page to rem values. As a result of this, it affected the alignment of elements and their sizes. I fixed the obvious ones when I introduced rem, but some minor ones are yet to be fixed. <br>That was a brief summary of today and I'm really really looking forward to maximizing tomorrow.</p>`,
  },

  {
    id: 5,
    dateStr: `16<sup>th</sup> September '24`,
    content: `<p>By far the most productive day since I have restarted my streak. Today I managed to finish a decent part of backlog I had in my Javascript weekend class. The focus of these topics was middlewares and http servers. I have never understood these topics as well as I did today and I'm so glad I did. I also wanted to sort've start with authentication but that will take some time. Anyways I managed to get a hang of these topics fairly well and tried implementing them on a local clone of this website. For some reason I am not able to import the express library, but am trying to figure out why. Other than that you can probably tell I'm very happy with today.<br><br> What makes me happier is the fact that I got my class roll number and it is the most apt number any developer could hope for. It is (drumroll) 64!!!!. This number is drilled into anyone who's into development, tech or both. 64 bit, base 64, 64gb and the list goes on. Couldn't be happier with today's progress and I can't wait to maximise tomorrow.</p>`,
  },

  {
    id: 6,
    dateStr: `17<sup>th</sup> September '24`,
    content: `<p>Akshita if you're reading this, thank you so much for your advice and help. Please call me tomorrow though. The blog of Day 4 has a little about you and might make you smile (nothing you don't already know) but still.<br><br>Coming to today's work, it was pretty decent. I couldn't manage to see the lectures I planned to but I implemented something I've been wanting to for a while. So I added a text container on the landing page which displays a new quote each time someone visits the site. I added this by using an api and by destructuring the JSON content it returned to me. Doing so also introduced concepts like ajax and jquery to me which are important and I'm happy that I was able to use them a bit. Other than that I'm happy with what I did today and like I said yesterday, can't wait to maximise tomorrow. Akshita seriously call me ;)</p>`,
  },

  {
    id: 7,
    dateStr: `18<sup>th</sup> September '24`,
    content: `<p>LETS FUCKING GOOO BOYSSS!!! I really shouldn't be starting a public blog on the internet like this but no other quote can captivate my feelings as effectively as this one. Today was a mad mad rollercoaster. I practically coded all day, not just lectures, not just an assignment, but BOTH. Today's probably the 3<sup>rd</sup> day in a row that I've been doing middlewares, and I'm so happy I did. I finally finished all lectures on middlewares and can now say confidently that I have a decent understanding of the express library. I can say this because for the past 3 days I've read documentation from all parts of the internet, tried a bunch of things, failed at many, but also figured what's the problem and what's the most apt way to fix them.<br><br> The eureka moment came today when I learnt about this forbidden technique called CORS (Cross origin resource sharing). The technique basically means connecting resources on different domains/IP's like a frontend and backend hosted separately on two separate domains. I will not dive into detail because then I can keep going on and on, but it was learning about this technique which fueled me for the rest of the day and really made me appreciate the intricacy of systems we so frequently take for granted. By no means am I a master of this subject (yet), but I feel that I can (and have today) appreciate it properly.<br><br> If you thought that was the best part of today, it was barely 30%!. I spent the rest of my day trying to build the backend of a todo app. Yes a todo app is one of the most basic projects any beginner can and is expected to code without hesitation, but my instructor added a challenge for all of us. He asked us to store the TODO's as JSON objects, not in a database (because we haven't learnt them properly) but on a file, a file part of (if I'm saying this correctly) temporary memory which gets loaded/created when the server is started. This memory doesn't get stored forever (like memory in a database) and resets itself everytime the runtime environment (nodejs in my case) is restarted. This was tricky and even the instructor told us that it is slightly hard, but somehow I managed to pull it off. Now each time I add a TODO (using a post request method) a TODO with its own ID gets added as an object to the array of TODO objects, and each time I delete a TODO, not only does the TODO get deleted, but all TODO's renumber their ID's to maintain simplicity.<br><br> I am particularly proud of this because it's only been a few days since I started practicing node.js properly, and managed to write all this code (even though it is relatively straight-forward) on my own, without the help of any tutorial. Ever since I restarted my streak (and I know I have said this a bunch of times now) I have never felt this happy. This is due to the fact that when I started my previous streak, I was starting from scratch. So no matter what I did, each day was exciting. Ever since I've had to restart my streak, it hasn't been the same, because I have already built a foundation and to get the same adrenaline hit I need to do significantly more than my counterpart streak.<br><br> It's only been a week and I'm already so happy. Arya Idnani you better pull this off this time and complete this challenge on a high high high FUCKING NOTE!</p>`,
  },

  {
    id: 8,
    dateStr: `19<sup>th</sup> September '24`,
    content: `<p>Today's day was another banger. It was the first day for many students at college (because admissions just got over), so saw many new faces, found some friends from highschool and in general the day was off to a good start. This start was taken to rollercoaster mode when our senior (roohin) approached us and asked us if we'd be interested in participating in an event. Given the fact that our coming lectures of the day were cancelled, we decided to sign up, and boy did we have a blast. Again we couldn't qualify but we had so much of fun. Thank you once again Roohin if you're reading this, we all relished every second of it. <br><br>Coming back to business, today I started a topic I've always had on my bucket list, AUTHENTICATION. I learnt about token (stateful) authentication and JWT (stateless) authentication. This was very fun and surprisingly I was able to digest the concepts well even though I had a jam packed day. Although a concerning point to note is the fact that JWT's can easily be decoded. This is ironic given the fact that they're used for storing authentication information. My instructor has assured us though that he will tell us why JWT's work inspite of this so called vulnerability.  Over the week-end I will be reviewing all the concepts I've learnt over the week and will definitely give JWT's another shot to better understand them. That's another day, and honestly the momentum is coming alive, I can feel it.</p>`,
  },

  {
    id: 9,
    dateStr: `20<sup>th</sup> September '24`,
    content: `<p>Not the day I wanted it to be. Given the momentum I had gained over the past few days having understood authentication, cors etc etc, I expected today's productivity to be decent. It wasn't however. Today I was going to learn a little more about JWT's, how they are actually secure and not an issue, but for some reason wasn't able to code last class' assignment. To be specific my code wasn't able to handle an error case. It handled the successful case properly, but for any code to even be considered as accomplishing the task, it should be able to handle all cases, optimisations come much after. I'm still trying to wrap my head around what the issue can be, but really don't know where to look.<br><br> I did however write code on paper in college today. So we had this boring "professional communication ethics" lecture, which I literally would've dozed off in had it not been for the code I was writing. The teacher probably thought I was making notes, little did she know I was coding. In my defense I paid attention to the lecture as well. When we were asked to write a summary of the lecture, our teacher was pretty impressed with my summary and complimented me. So once again, not the best day, but I hope I can pick things up from here over the coming weekend.</p>`,
  },

  {
    id: 10,
    dateStr: `21<sup>th</sup> September '24`,
    content: `<p>Today was yet again a rocky day. Being a Saturday, I looked forward to making the most out of today, but sadly I didn't start work before 7pm. I tried building a Viewer Counting function which would keep track of traffic. Now this sounds easy in principal, but it isn't (atleast for a beginner). Especially not when you want to deploy it on the internet. The biggest difficulty I faced was with CORS, a concept I thought I understood. Somehow, by a lot of tedious permutation and combination I was able to make this work locally, but when I pushed this to deployment using vercel, it just wouldn't work.If I were to list all the issues I ran into or the number of commits I made thinking that was it, this blog would never get over. So yeah couldn't get much out of the day in terms of quantity but I am now well aware of the areas I need to work hard on.<br><br> But some good did come out of this unproductive day. So someone from my college was looking for a team-mate to participate with in an upcoming hackathon. On reaching out to her, I'm now part of a group of 4 first year students, revving up to code to the best of our abilities in the upcoming hackathon. I pray to god that we're able to work well together as a team and live up to each others expectations.</p>`,
  },

  {
    id: 11,
    dateStr: `22<sup>nd</sup> September '24`,
    content: `<p>Yet another rocky day. Given the fact that I was having a fair share of unproductive days lately, I woke up thinking that I'll maximise today, sadly I couldn't. This wasn't due to lack of trying, but mainly because I literally hit a dead-end. Yesterday I tried deploying the older version of my website using vercel, this was so that I can run a node js server on vercel in order to carry out any backend requests like keeping a track of user requests. Sadly I wasn't able to figure this out yesterday, and neither was I able to today. I did come a lot closer though, but then again dead-end. This really puts into perspective on how much I need to learn and push myself.<br><br> I did however manage to get some work today. This involved setting up a frontend page for the backend authentication script I had written in express. This worked once I set up CORS correctly and wasn't a problem. I then secured my API keys which were previously publicly visible to anyone who checked my github repository out. I was well aware of this vulnerability ever since I deployed the quotes API, but back then storing API keys in environment variables was challenging to me. This was because I was trying to do this using the dotenv library, which only works on nodejs and not on browsers. This again goes to show how much I need to learn in node js. Eventually out of frustration I chat gpt'd the solution, and implemented it. Again the AI generated solution had its quirks and I was happy to be able to fix them.<br><br>With that being said, I am officially at the end of my Javascript class backlog, so hopefully if I play my cards right from now on, I won't create newer backlogs, and hopefully push myself more from now onwards.</p>`,
  },

  {
    id: 12,
    dateStr: `23<sup>nd</sup> September '24`,
    content: `<p>A right step in the right direction, is the best way to describe today. I slept early the previous day around 9pm in order to get up at 4, and thankfully I was able to. I then coded from 4:30am to roughly 5:45am for about 75 minutes, and got my basics about mongodb clear. Given the fact that about a week ago I found mongodb overwhelming, today's progress was just what I needed. I'm yet to figure how to store tokens by updating the database, but for some reason am only able to add new tokens instead of updating existing ones which is ideal. I'll try figuring this out today and more importantly aim to get up tomorrow as well and try to code for longer tomorrow.</p>`,
  },

  {
    id: 13,
    dateStr: `24<sup>th</sup> September '24`,
    content: `<p>What a day, what a day indeed. One year ago, it was on this very day that I went through one of my mental breakdowns. I was completely torn and my willpower was shattered. But here I am one year later, getting up at 4am once again like yesterday, coding in the morning and after college, being able to get over my past. A past which has taken everything away from me, a past which I can finally breathe a sigh of relief about. <br><br>Even though I slept at 11pm yesterday, I still managed to get up at 4am and learn about bcrypt and zod. These were libraries I had touched upon when I was introduced to mongodb, but it was today that I was able to better understand them. The highlight of was not just the better position I am in, contrary to last year, but it was in partially setting up the backend of my blog site. I linked a mongodb database to my backend, created a function to post blogs using post request methods and modified that method to seed my database with all these blogs in just one single click! Yes one request was all it took to seed my database completely. Instead of simply copy-pasting, I iterated over an array of objects with blog data, and in each iteration I added data to my database. Even though this is a simple and straightforward approach, given my history with mongodb, I was happy it worked just right on the first try.<br><br> Arya Idnani you've made it this far, you've come from a place of despair, heartbreak, from being wronged, cheated and left behind to building yourself from scratch, learning how to say a NO to people and to catching up to your peers, realising your self worth and the very potential it stems from. No one can comprehend what I've been through and it is with utmost pride that I'm writing this blog. Never could I have imagined such a miraculous change in circumstances, one in which I feel wanted, I feel cared for and most importantly finally being able to feel a sense of purpose , the motivation AND action to fulfill it. I'm finally at a place from where I can say with a smile on my face that-<br> <i>The only way to learn is to live.</i></p>`,
  },

  {
    id: 14,
    dateStr: `25<sup>th</sup> September '24`,
    content: `<p>Today's day was also great, it was great because I was able to write a backend to talk to my database I set up yesterday, and link it to my frontend. I also managed to retrive data from my database using get request methods which I wrote in the backend file. The only problem I came across was when it came to using that data in dom manipulation. For some weird reason I wasn't able to iterate over the data and have a strange feeling that it might have something to do with its type. I'll anyways be looking into this, because once I have this figured out, my blog site will officially be a FULLSTACK application with a Frontend, Backend and Database!<br><br>This cycle of up's and downs is soo strange and day after day it becomes more obvious. I've come to realise that we often overlook it unless we keep a proper track of each day for sometime. This realisation has also prepared me for the days which aren't as productive. So all in all I'm happy how this challenge is turning out to be and I can't wait to for the endless lessons it is going to teach me!</p>`,
  },

  {
    id: 15,
    dateStr: `26<sup>th</sup> September '24`,
    content: `<p>Days like these get thrown at me when I expect them the least. Till yesterday I was on a flying streak of good days with each day being better than the other, today however was pretty weird. Due to some miscommunication I reached college only to find out that it was cancelled. This was because of a rain alert which was issued yesterday. Our college was pre-emptive enough to share government notifications, but then they decided to keep the college working last minute and when barely anyone showed up they ended up cancelling it. This was a gut punch because thanks to it the entire first half of my day went to waste. Not just that, when I got back home I was so tired I fell asleep only to wake up in the evening.<br><br> I was determined though to keep my streak going, so given the fact that my weekend javascript class backlog was almost over, decided to learn a little about array methods, maps, filtering and reducing. These are really important methods and will be pivotal in building a strong fullstack application. Somehow I managed to do this for 2 hours, but seeing an entire day go to waste the way in which it did, really saddened me. I need to accept the fact that at some point everything will go south on me. It's much better to be prepared for the worst rather than expecting things to fall into place. It is upto me now to strengthen my ability to face the unexpected, to never falter no matter how hard the blows and to reach a level at which it all looks effortless.</p>`,
  },

  {
    id: 16,
    dateStr: `27<sup>th</sup> September '24`,
    content: `<p>A decent-ish day is probably the most apt way to describe today. I was able to go through a decent amount of array methods, and was able to understand them well. I better understood the difference between the map and filter method and was able to use them to solve some assignments. Once I'm done writing today's blog I'll try learning a little bit more about them before I call it a day, and will hopefully be able to finish the section about them by tomorrow.<br><br>A big part of today was getting anxious about not starting with react. Because as of now I'm only trying to get a hang of writing basic Javascript and am doing node, express and mongodb in the background. However this is where I need to keep calm instead of letting the fomo get to me. I should feel lucky enough to having started walking down this path in a stress free environment and I should try keeping it that way. The second I start learning something in a hurry because of fomo, is where all of this loses its meaning. Ultimately I need to <i>Code because I want to, not because I have to.</i> </p>`,
  },

  {
    id: 17,
    dateStr: `28<sup>th</sup> September '24`,
    content: `<p>So I finally finished all the array methods which were part of my udemy course. They were pretty helpful, but were also pretty self explanatory. They were such that mdn documentation itself seemed more than enough to get a good grasp over them. Other than that today was pretty unproductive but not because of lack of trying. I built the most simplest fullstack site possible. One which lets you sign up and then if you're signed up, looks for your username in the database and displays a welcome message. This was all done without authentication so was basically nothing. The purpose behind building something as simple as possible was to understand how to deploy fullstack applications on the internet.<br><br> To do so one needs to have a server running which the hosting service itself provides. I had tried this with an older version of my blog site, but that failed miserably. Back then no matter what I did, the browser threw a CORS error at me. This was something I didn't run into today, but for some reason my site wouldn't talk to my backend at all. This was a good sign, to know that the backend is running, but once again I found myself to be clueless. In the process of building this simple application, I also learnt how to handle body and query parameters in requests. This is something I had overlooked, but now that I was building something for a browser I had to figure it all out.
    So yes I couldn't get my end goal to run, but learnt a ton in the process. </p>`,
  },

  {
    id: 18,
    dateStr: `29<sup>th</sup> September '24`,
    content: `<p>What a day indeed. I spent most of today trying to debug how to deploy my fullstack code, but kept hitting dead ends. Thanks to these dead ends I tried all the possible ways in which I could change my code. Yesterday I switched from body requests to query and then back to body and figured how to make that work and today I switched from axios to fetch and learnt a ton about that. Unlike axios, fetch requires one to specify the request method, the body, the headers and everything you possibly can. The first time I did this, I only mentioned body and the request methods. On trying to run this locally it didn't work, which is when I stumbled on the 'applications/json' header which made it work locally. On trying to deploy to vercel, all hell brooke loose once again. On the advice of a senior I even tried from switching from vercel to aws, but that was another nightmare which didn't yield anything.<br><br>The highlight of today was when I got frustrated from all this, I decided to catch a break and drive. I was accompanied by my dad (which is mandated by law for learners) and my grandfather, and I'm so happy with how well the drive went. I drove for a whopping 79.6 kilometers which included highway driving, bridge driving, driving through traffic and avoiding potholes on the way. This was a superb experience and really gave me a lot of confidence. What was even more satisfying was that my dad approved of the way I drove and so did my grandfather. Nothing better could've compensated for the headache devops gave me, and I can't wait to drive again!</p>`,
  },
];

/* ********************************************************** */

// async function fetchBlogs() {
//   const blog = Promise.resolve(await axios.get("http://localhost:443/"));
//   return blog;
// }

// const blogs = fetchBlogs().then((res) => res.data);
// console.log(Promise.resolve(blogs));

// let blogs;

// async function fetchBlogs() {
//   const response = await axios.get("http://localhost:443/");
//   return response.data; // Return the data directly
// }

// (async () => {
//   try {
//     blogs = await fetchBlogs();
//     console.log(blogs);
//   } catch (error) {
//     console.error("Error fetching blogs:", error);
//   }
// })();

/* ********************************************************** */

//Rendering Function to implement dynamic doms

function blogRender(blogArray) {
  const accordionContainer = document.querySelector(".accordion");
  accordionContainer.innerHTML = "";

  blogArray.forEach((blog) => {
    const blogElement = document.createElement("div");
    blogElement.className = `item item-${blog.id}`;

    blogElement.innerHTML = `
    <h2 class = "day-number">${`Day ${blog.id}`}</h2>
    <h2 class = "date-number hidden">${blog.dateStr}</h2>
    <svg xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
            class="icon downwards">

             <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="m19.5 8.25-7.5 7.5-7.5-7.5"
            />
          </svg>

          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
            class="icon upwards hidden"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="m4.5 15.75 7.5-7.5 7.5 7.5"
            />
          </svg>

          <div class = "content hidden"> ${blog.content}
          <h4>${blog.dateStr.replaceAll(" ", "")}</h4>
          </div>
          `;

    accordionContainer.appendChild(blogElement);
  });
  const footerEl = document.createElement("footer");
  footerEl.className = "blog-footer";
  footerEl.innerHTML = `&copy;2024-Arya IdnanI`;
  accordionContainer.append(footerEl);

  pageLoad();
}

function blogSort(order = "latest") {
  blogs.sort((a, b) => {
    if (order === "latest") {
      return b.id - a.id;
    } else if (order === "oldest") {
      return a.id - b.id;
    }
  });
  console.log("workss");
  blogRender(blogs);
}

blogRender(blogs); //Rendering
blogSort("latest"); //Initial Sorting

const sortBtn = document.querySelector(".sort-btn");

sortBtn.addEventListener("click", () => {
  sortBtn.classList.toggle("oldest");
  sortBtn.classList.toggle("latest");

  if (!sortBtn.classList.contains("latest")) {
    sortBtn.textContent = "Oldest";
    blogSort("oldest");
  } else if (!sortBtn.classList.contains("oldest")) {
    sortBtn.textContent = "Latest";
    blogSort("latest");
  }
});

//Accordion Functionality

function pageLoad() {
  const itemSelector = document.querySelectorAll(".item");
  const daySelector = document.querySelectorAll(".day-number");
  const dateSelector = document.querySelectorAll(".date-number");
  const downIcon = document.querySelectorAll(".downwards");
  const upIcon = document.querySelectorAll(".upwards");

  for (let i = 0; i < itemSelector.length; i++) {
    itemSelector[i].addEventListener("click", function () {
      itemSelector[i].classList.toggle("active");
      downIcon[i].classList.toggle("hidden");
      upIcon[i].classList.toggle("hidden");
    });

    itemSelector[i].addEventListener("mouseenter", function () {
      daySelector[i].classList.toggle("hidden");
      dateSelector[i].classList.toggle("hidden");
    });

    itemSelector[i].addEventListener("mouseleave", function () {
      dateSelector[i].classList.toggle("hidden");
      daySelector[i].classList.toggle("hidden");
    });
  }
}

document.querySelector(".screen-theme").addEventListener("click", () => {
  document.querySelector(".moon-icon").classList.toggle("hidden");
  document.querySelector(".sun-icon").classList.toggle("hidden");
  document.querySelector("body").classList.toggle("dark");
  document.querySelector("body").classList.toggle("light");
});
